
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Records | Koozai Digital Agency Marketing</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link href="./assets/css/style.css" rel="stylesheet" />
    <link href="./assets/css/buttons.css" rel="stylesheet" />
    <link href="./assets/css/responsive.css" rel="stylesheet" />
  </head>
  <body class="login-bg">
    <div class="body-wrapper">
      <header class="d-flex justify-content-between shadow-sm">
        <div class="header-logo">
          <img src="./assets/images/koozai-logo.jpeg" class="img-fluid" />
        </div>
        <div class="navigator">
          <img src="./assets/images/BG-30.png" />
          <a href="./profile.html">Profile</a>
        </div>
      </header>

      
  <!-- loading spinner -->

  <div id="loadingSpinner" class="loader-container d-none">
    <span class="loader"></span>
  </div>
<!-- Loading gif -->
  <div class="loading-gif d-none" id="loading-gif">
    <img src="./assets/images/loading.5e6578e0.svg" class="w-75" />
  </div>

      <div class="body-content">
        <ul class="nav nav-tabs order-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button
              class="nav-link active"
              id="all-tab"
              data-bs-toggle="tab"
              data-bs-target="#all"
              type="button"
              role="tab"
              aria-controls="all"
              aria-selected="true"
            >
              All
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="pending-tab"
              data-bs-toggle="tab"
              data-bs-target="#pending"
              type="button"
              role="tab"
              aria-controls="pending"
              aria-selected="false"
              tabindex="-1"
            >
              Pending
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="completed-tab"
              data-bs-toggle="tab"
              data-bs-target="#completed"
              type="button"
              role="tab"
              aria-controls="completed"
              aria-selected="false"
              tabindex="-1"
            >
              Completed
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button
              class="nav-link"
              id="frozen-tab"
              data-bs-toggle="tab"
              data-bs-target="#frozen"
              type="button"
              role="tab"
              aria-controls="frozen"
              aria-selected="false"
              tabindex="-1"
            >
              Frozen
            </button>
          </li>
        </ul>
        <div class="tab-content" id="myTabContent">
          <!-- All Tab Content -->
          <div
            class="tab-pane fade show active"
            id="all"
            role="tabpanel"
            aria-labelledby="all-tab"
          >
            <div class="records-list" id="all-content">
              <!-- AJAX-loaded content for All tab will be inserted here -->
            </div>
          </div>

          <!-- Pending Tab Content -->
          <div
            class="tab-pane fade"
            id="pending"
            role="tabpanel"
            aria-labelledby="pending-tab"
          >
            <div class="records-list" id="pending-content">
              <!-- AJAX-loaded content for Pending tab will be inserted here -->
            </div>
          </div>

          <!-- Completed Tab Content -->
          <div
            class="tab-pane fade"
            id="completed"
            role="tabpanel"
            aria-labelledby="completed-tab"
          >
            <div class="records-list" id="completed-content">
              <!-- AJAX-loaded content for Completed tab will be inserted here -->
            </div>
          </div>

          <!-- Frozen Tab Content -->
          <div
            class="tab-pane fade"
            id="frozen"
            role="tabpanel"
            aria-labelledby="frozen-tab"
          >
            <div class="records-list" id="frozen-content">
              <!-- AJAX-loaded content for Frozen tab will be inserted here -->
            </div>
          </div>
        </div>
      </div>
      <div class="footer-panel">
        <div class="footer-navigator">
          <a href="./index.html">
            <div class="footer-navigator-icon">
              <img src="./assets/images/home.png" />
            </div>
            <div class="footer-navigator-text">Home</div>
          </a>
        </div>
        <div class="footer-navigator">
          <a href="./start.html">
            <div class="footer-navigator-icon active">
              <img src="./assets/images/starting.png" />
            </div>
            <div class="footer-navigator-text">Starting</div>
          </a>
        </div>
        <div class="footer-navigator">
          <a href="./order.html">
            <div class="footer-navigator-icon">
              <img src="./assets/images/order.png" />
            </div>
            <div class="footer-navigator-text">Records</div>
          </a>
        </div>
      </div>
    </div>

<!-- Model for Submit data -->

    <div
class="modal fade modal-sm"
id="confirmationModal"
tabindex="-1"
aria-labelledby="confirmationModalLabel"
aria-hidden="true"
>
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content bg-white">
    <div class="modal-body px-0 pb-0">
      <h6 class="text-center mb-3">Koozai</h6>
      <p class="text-gray text-center text-black-50">
        Do you want to submit?
      </p>
      <div class="border-top footer-modal">
        <div class="modal-button cancel">
          <a
            class="text-black text-no-underline"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#confirmationModal"
          >
            Cancel
          </a>
        </div>
        <div class="modal-button logout">
          <a
            class="text-danger text-no-underline"
            href="#"
            id="submitButton" 
          >
            Okay
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
</div>



<!-- <div class="modal fade" id="confirmDepositModal" tabindex="-1" aria-labelledby="errorSuccessModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content errorSuccessModal ">
          <div class="d-flex justify-content-center mt-2">
              <h3 class="modal-title text-center" id="errorSuccessModalLabel">Koozai</h3>
          </div>
          <div class="modal-body">
            The balance is insufficeint, Please recharge before submitting!
          </div>
          <hr class="text-black-50 mt-1">
          <div class="modal-footerr d-flex justify-content-around mb-3">
            <h6 type="button" class="text-black"  id="cancelButton" data-dismiss="modal">Cancel</h6>
            <h6 type="button" class="text-danger" id="depositButton">Okay</h6>
          </div>
      </div>
  </div>
</div> -->



<div
class="modal fade modal-sm confirmationModal"
id="confirmDepositModal"
tabindex="-1"
aria-labelledby="confirmDepositModalLabel"
aria-hidden="true"
>
<div class="modal-dialog modal-dialog-centered">
  <div class="modal-content bg-white">
    <div class="modal-body px-0 pb-0">
      <h6 class="text-center mb-4">Koozai</h6>
      <p class="text-center text-black-50 mb-4 fs-6">
        The Balance is insufficient, Please recharge before submitting!
      </p>
      <div class="border-top footer-modal">
        <div class="modal-button cancel">
          <a
            class="text-black text-no-underline"
            href="#"
            data-bs-toggle="modal"
            data-bs-target="#confirmDepositModal"
          >
            Cancel
          </a>
        </div>
        <div class="modal-button logout">
          <a
            class="text-danger text-no-underline"
            href="#"
            id="depositButton" 
          >
            Okay
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
</div>


<!-- Rest of your HTML -->


    <!-- CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    
    <!-- moment.js CDN LINK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>

    <script  src="./js/integrations/profile.js"></script>
    <script  src="./js/integrations/start.js"></script>
    <script  src="./js/integrations/order.js"></script>
    <!-- base url file -->
    <script src="./js/integrations/all.js"></script> 
    
    <script>

      
$(document).ready(function () {
        $("#submitButton").click(() => {
          $("#loading-gif").toggleClass("d-none");
          setTimeout(() => {
            $("#loading-gif").toggleClass("d-none");
            // $("#driveDataModal").modal("show");
          }, 200);
        });
      });
    </script>
    
    <!-- <script>


// Function to parse JWT token
function parseJwt(token) {
  const base64Url = token.split('.')[1];
  const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
  const jsonPayload = decodeURIComponent(
    atob(base64)
      .split('')
      .map(function (c) {
        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
      })
      .join('')
  );

  return JSON.parse(jsonPayload);
}





      $(document).ready(function () {


        
        // Fetch the user's profile using the bearer token
        const token = localStorage.getItem('user_token');
        const decodedToken = parseJwt(token);
        const userId = decodedToken.userId;

        // Function to load data for a specific tab
        function loadTabData(tabId, status) {
          
    
          $.ajax({
            url: `http://localhost:5000/api/get-transactions-by-status/${userId}/${status}`,
            headers: {
            Authorization: `Bearer ${token}`,
          },  
            type: 'GET',
            success: function (data) {

              console.log(data)
              // Handle the data received from the API
              const tabContent = $(tabId);
              // Clear existing content
              tabContent.empty();
    
              // Loop through the data and append it to the content area
              data.dataWithCommissions.forEach(function (item) {
                const recordHtml = `
                <div class="records-list">
              <div class="record">
                <div class="d-flex justify-content-between align-items-center">
                  <div><b>2023-07-19 19:53:35</b></div>
                  <div class="order-status completed">${item.status}</div>
                </div>
                <div class="info">
                  <div class="goods">
                    <img src=${item.product_image_url} />
                    <div class="name">${item.product_description}</div>
                  </div>
                  <div class="order pt-2">
                    <div class="row">
                      <div class="col-md-6">
                        <label>Total Amount</label>
                        <div class="value">USDT ${item.product_price}</div>
                      </div>
                      <div class="col-md-6">
                        <label>Profit</label>
                        <div class="value">USDT ${item.commission}</div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
                `;
                tabContent.append(recordHtml);
              });
            },
            error: function (error) {
              // Handle errors if the AJAX request fails
              console.error('Error loading data:', error);
            },
          });
        }
    
        // Load data for the "All" tab when the page loads
        loadTabData('#all-content', 'all');
    
        // Load data for the "Pending" tab when the page loads
        loadTabData('#pending-content', 'pending');
    
        // Load data for the "Completed" tab when the page loads
        loadTabData('#completed-content', 'completed');
    
        // Load data for the "Frozen" tab when the page loads
        loadTabData('#frozen-content', 'frozen');
    
        // Handle tab clicks to load data for each tab
        $('#all-tab').click(function () {
          loadTabData('#all-content', 'all');
        });
    
        $('#pending-tab').click(function () {
          loadTabData('#pending-content', 'pending');
        });
    
        $('#completed-tab').click(function () {
          loadTabData('#completed-content', 'completed');
        });
    
        $('#frozen-tab').click(function () {
          loadTabData('#frozen-content', 'frozen');
        });
      });
    </script> -->
    

  
  

  </body>
</html>
